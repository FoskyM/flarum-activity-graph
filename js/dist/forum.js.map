{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@foskym/flarum-activity-graph/webpack/bootstrap","webpack://@foskym/flarum-activity-graph/webpack/runtime/compat get default export","webpack://@foskym/flarum-activity-graph/webpack/runtime/define property getters","webpack://@foskym/flarum-activity-graph/webpack/runtime/hasOwnProperty shorthand","webpack://@foskym/flarum-activity-graph/webpack/runtime/make namespace object","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/app']\"","webpack://@foskym/flarum-activity-graph/./src/common/index.ts","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['forum/app']\"","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/extend']\"","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@foskym/flarum-activity-graph/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@foskym/flarum-activity-graph/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/components/Select']\"","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@foskym/flarum-activity-graph/./src/common/utils/categories.ts","webpack://@foskym/flarum-activity-graph/./src/forum/pages/GraphPage.js","webpack://@foskym/flarum-activity-graph/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@foskym/flarum-activity-graph/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@foskym/flarum-activity-graph/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('foskym/flarum-activity-graph', () => {\n  console.log('[foskym/flarum-activity-graph] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","export const categories = [\r\n  'comments',\r\n  'discussions',\r\n  'likes',\r\n  'custom_levels_exp_logs',\r\n  'invite_user_invites',\r\n  'store_purchases',\r\n  'polls_create_polls',\r\n  'polls_votes',\r\n  'username_requests_username',\r\n  'username_requests_nickname',\r\n  'best_answer_marked',\r\n  'badges_assigned',\r\n  'achievements_achieved',\r\n  'quest_done'\r\n];","import app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Select from 'flarum/common/components/Select';\nimport extractText from 'flarum/common/utils/extractText';\nimport { categories } from '../../common/utils/categories';\n\nexport default class GraphPage extends UserPage {\n  loading = true;\n  year = new Date().getFullYear().toString();\n  graphData = null;\n  categories = null;\n  total = 0;\n  chart = null;\n  resizeHandlerBound = false;\n  darkModeHandlerBound = false;\n  recentMode = 'light';\n\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadUser(m.route.param('username'));\n    this.loadGraph();\n  }\n\n  loadGraph() {\n    this.loading = true;\n\n    app.request({\n      method: 'GET',\n      url: `${app.forum.attribute('apiUrl')}/activity-graph`,\n      params: { user_id: this.user.id(), year: this.year },\n    }).then((result) => {\n      this.loading = false;\n      this.graphData = result.data;\n      this.categories = result.categories;\n      this.total = result.total;\n      m.redraw();\n      this.renderGraph();\n    });\n  }\n\n  renderGraph() {\n    if (!window.echarts) {\n      setTimeout(() => this.renderGraph(), 200);\n      return;\n    }\n\n    const graph_container = document.getElementById('activity-graph');\n    if (!graph_container) return;\n\n    setTimeout(() => {\n      const root = document.documentElement;\n      const colorScheme = getComputedStyle(root).getPropertyValue('--color-scheme').trim();\n      const bodyBg = getComputedStyle(root).getPropertyValue('--body-bg').trim();\n\n      if (colorScheme !== this.recentMode) {\n        this.recentMode = colorScheme;\n        this.chart?.dispose();\n        this.chart = window.echarts.init(graph_container, colorScheme === 'dark' ? 'dark' : 'light');\n      } else {\n        this.chart = this.chart || window.echarts.init(graph_container);\n      }\n\n      this.chart.setOption(this.getChartOptions(bodyBg));\n\n      if (!this.resizeHandlerBound) {\n        window.addEventListener('resize', () => this.chart.resize());\n        this.resizeHandlerBound = true;\n      }\n\n      if (!this.darkModeHandlerBound && flarum.extensions['fof-nightmode']) {\n        document.addEventListener('fofnightmodechange', () => this.renderGraph());\n        this.darkModeHandlerBound = true;\n      }\n    }, 50);\n  }\n\n  getChartOptions(bodyBg) {\n    return {\n      backgroundColor: bodyBg,\n      tooltip: {\n        position: app.forum.attribute('foskym-activity-graph.tooltip_position') || 'top',\n        className: 'foskym-activity-graph-tooltip',\n        formatter: (e) => this.formatTooltip(e),\n      },\n      visualMap: {\n        show: false,\n        min: 0,\n        max: 300,\n        calculable: true,\n        orient: 'horizontal',\n        left: 'center',\n        top: 'top',\n        inRange: {\n          color: ['#75ca67', '#23b20c', '#b99f11', '#b81111', '#6c0b0b', '#000000'],\n        },\n      },\n      calendar: [{\n        range: this.year,\n        cellSize: ['auto', 'auto'],\n        left: 50,\n        top: 30,\n        splitLine: {\n          lineStyle: {\n            color: '#777',\n          },\n        },\n        dayLabel: {\n          nameMap: app.translator.trans('foskym-activity-graph.forum.label.name_map')[0],\n          firstDay: 1,\n        },\n        monthLabel: {\n          nameMap: app.translator.trans('foskym-activity-graph.forum.label.name_map')[0],\n        },\n        yearLabel: {\n          show: true,\n        },\n      }],\n      series: [{\n        type: 'heatmap',\n        coordinateSystem: 'calendar',\n        calendarIndex: 0,\n        data: this.graphData,\n      }],\n    };\n  }\n\n  formatTooltip(e) {\n    let date = e.data[0];\n    let total = e.data[1];\n    let format = app.forum.attribute('foskym-activity-graph.times_display_format') ||\n      extractText(app.translator.trans('foskym-activity-graph.lib.defaults.times_display_format'));\n    let html = `<p>${e.marker}${date.substring(5)} <b>${format.includes('[count]') ? format.replace('[count]', total) : `${total} ${format}`}</b></p>`;\n    categories.forEach((category) => {\n      if (app.forum.attribute(`foskym-activity-graph.count_${category}`) === false) return;\n      if (this.categories[category] && this.categories[category][date]) {\n        html += `<p><small>${app.translator.trans(`foskym-activity-graph.forum.label.categories.${category}`)} <b>${format.includes('[count]') ? format.replace('[count]', this.categories[category][date]) : `${this.categories[category][date]} ${format}`}</b></small></p>`;\n      }\n    });\n    return html;\n  }\n\n  content() {\n    const currentYear = new Date().getFullYear().toString();\n    let fromYear = app.forum.attribute('foskym-activity-graph.from_year') || currentYear;\n    fromYear = fromYear > currentYear ? currentYear : fromYear;\n\n    const options = Array.from({ length: currentYear - fromYear + 1 }, (_, i) => (parseInt(fromYear) + i).toString())\n      .reduce((acc, year) => ({ ...acc, [year]: year }), {});\n\n    const format = app.forum.attribute('foskym-activity-graph.times_display_format') ||\n      extractText(app.translator.trans('foskym-activity-graph.lib.defaults.times_display_format'));\n\n    const totalTimes = format.includes('[count]') ? format.replace('[count]', this.total) : `${this.total} ${format}`;\n\n    return (\n      <div class=\"activity-graph-page\">\n        <h2>{app.translator.trans('foskym-activity-graph.forum.label.activity_graph')}</h2>\n        <div style=\"display: flex; justify-content: space-between; align-items: end;\">\n          <span>{app.translator.trans('foskym-activity-graph.forum.label.total_times', { total: totalTimes })}</span>\n          <Select\n            options={options}\n            value={this.year}\n            onchange={(value) => {\n              this.year = value;\n              this.loadGraph();\n            }}\n          />\n        </div>\n        {this.loading && <LoadingIndicator />}\n        <div id=\"activity-graph\" style=\"width:100%; height:150px;\"></div>\n      </div>\n    );\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport GraphPage from \"./pages/GraphPage\";\nimport LinkButton from 'flarum/common/components/LinkButton';\napp.initializers.add('foskym/flarum-activity-graph', () => {\n  app.routes['user.activity-graph'] = {\n    path: '/u/:username/activity-graph',\n    component: GraphPage\n  };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    items.add(\n      'activity-graph',\n      LinkButton.component(\n        {\n          href: app.route('user.activity-graph', { username: this.user?.username() }),\n          icon: 'fas fa-chart-line',\n        },\n        [\n          app.translator.trans('foskym-activity-graph.forum.label.activity_graph'),\n        ]\n      )\n    );\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","console","log","_extends","assign","bind","target","i","arguments","length","source","apply","this","_setPrototypeOf","p","setPrototypeOf","__proto__","categories","GraphPage","_UserPage","subClass","superClass","_this","_len","args","Array","_key","concat","loading","year","Date","getFullYear","toString","graphData","total","chart","resizeHandlerBound","darkModeHandlerBound","recentMode","create","constructor","_proto","oninit","vnode","loadUser","m","route","param","loadGraph","_this2","method","url","attribute","params","user_id","user","id","then","result","data","redraw","renderGraph","_this3","window","echarts","graph_container","document","getElementById","setTimeout","_this3$chart","root","documentElement","colorScheme","getComputedStyle","getPropertyValue","trim","bodyBg","dispose","init","setOption","getChartOptions","addEventListener","resize","extensions","_this4","backgroundColor","tooltip","position","className","formatter","e","formatTooltip","visualMap","show","min","max","calculable","orient","left","top","inRange","color","calendar","range","cellSize","splitLine","lineStyle","dayLabel","nameMap","trans","firstDay","monthLabel","yearLabel","series","type","coordinateSystem","calendarIndex","_this5","date","format","extractText","html","marker","substring","includes","replace","forEach","category","content","_this6","currentYear","fromYear","options","from","_","parseInt","reduce","acc","_extends2","totalTimes","class","style","Select","onchange","LoadingIndicator","UserPage","path","component","extend","items","_this$user","LinkButton","href","username","icon"],"sourceRoot":""}